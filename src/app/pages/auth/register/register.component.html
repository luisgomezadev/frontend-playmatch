<div class="bg-gray-800 w-full z-30 h-screen px-8 py-20 overflow-y-auto relative">
  <div class="absolute top-5 right-5">
    <app-button
      text="Inicio"
      color="transparent"
      icon="fa-regular fa-house"
      [hasIcon]="true"
      (clicked)="goBack()"></app-button>
  </div>
  <h1 class="text-2xl font-medium tracking-wide text-center text-primary">Crea tu cuenta</h1>
  <h2 class="text-lg text-center mb-10 text-gray-400">Ingresa tu información personal</h2>
  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="flex flex-col gap-4 md:px-16">
    <div class="mb-4">
      <label class="block text-sm tracking-wide mb-1 text-gray-200" for="role">
        Tipo de usuario
      </label>
      <select
        id="role"
        formControlName="role"
        class="w-full px-3 py-1 rounded-lg border border-gray-300 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-400">
        <option value="" disabled selected>Seleccione un tipo de usuario</option>
        @for (rol of roles; track $index) {
          <option [value]="rol.value">{{ rol.label }}</option>
        }
      </select>
      @if (registerForm.get('role')?.touched && registerForm.get('role')?.invalid) {
        <div class="text-red-500 text-sm mt-1">
          <span>El tipo de usuario es obligatorio.</span>
        </div>
      }
    </div>
    <div class="mb-4">
      <label class="block text-sm tracking-wide mb-1 text-gray-200" for="firstName">Nombre</label>
      <input
        id="firstName"
        type="text"
        formControlName="firstName"
        placeholder="Ingrese su nombre"
        class="w-full px-3 py-1 rounded-lg border border-gray-300 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-400" />
      @if (registerForm.get('firstName')?.touched && registerForm.get('firstName')?.invalid) {
        <div class="text-red-500 text-sm mt-1">
          <span>El nombre es obligatorio.</span>
        </div>
      }
    </div>
    <div class="mb-4">
      <label class="block text-sm tracking-wide mb-1 text-gray-200" for="lastName">Apellido</label>
      <input
        id="lastName"
        type="text"
        formControlName="lastName"
        placeholder="Ingrese su apellido"
        class="w-full px-3 py-1 rounded-lg border border-gray-300 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-400" />
      @if (registerForm.get('lastName')?.touched && registerForm.get('lastName')?.invalid) {
        <div class="text-red-500 text-sm mt-1">
          <span>La apellido es obligatorio.</span>
        </div>
      }
    </div>
    <div class="mb-4">
      <label class="block text-sm tracking-wide mb-1 text-gray-200" for="city">Ciudad</label>
      <input
        id="city"
        type="text"
        formControlName="city"
        placeholder="Ingrese su ciudad donde reside"
        class="w-full px-3 py-1 rounded-lg border border-gray-300 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-400" />
      @if (registerForm.get('city')?.touched && registerForm.get('city')?.invalid) {
        <div class="text-red-500 text-sm mt-1">
          <span>La ciudad es obligatoria.</span>
        </div>
      }
    </div>
    <div class="mb-4">
      <label class="block text-sm tracking-wide mb-1 text-gray-200" for="cellphone">Celular</label>
      <input
        id="cellphone"
        type="text"
        formControlName="cellphone"
        placeholder="Ingrese su número celular"
        class="w-full px-3 py-1 rounded-lg border border-gray-300 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-400" />
      @if (registerForm.get('cellphone')?.touched && registerForm.get('cellphone')?.invalid) {
        <div class="text-red-500 text-sm mt-1">
          <span>El número celular es invalido.</span>
        </div>
      }
    </div>
    <div class="mb-4">
      <label class="block text-sm tracking-wide mb-1 text-gray-200" for="email">
        Correo electrónico
      </label>
      <input
        id="email"
        type="email"
        formControlName="email"
        placeholder="Ingrese su correo electrónico"
        class="w-full px-3 py-1 rounded-lg border border-gray-300 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-400" />
      @if (registerForm.get('email')?.touched && registerForm.get('email')?.invalid) {
        <div class="text-red-500 text-sm mt-1">
          @if (registerForm.get('email')?.errors?.['required']) {
            <span>El correo es obligatorio.</span>
          } @else if (registerForm.get('email')?.errors?.['email']) {
            <span>El correo no es valido.</span>
          }
        </div>
      }
    </div>
    <div class="mb-4">
      <label class="block text-sm tracking-wide mb-1 text-gray-200" for="password">
        Contraseña
      </label>
      <div class="relative">
        <input
          id="password"
          [type]="showPassword ? 'text' : 'password'"
          formControlName="password"
          placeholder="Ingrese su contraseña"
          class="w-full px-3 py-1 rounded-lg border border-gray-300 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-400" />
        <button
          type="button"
          (click)="togglePasswordVisibility()"
          class="absolute top-1/2 right-3 transform -translate-y-1/2 text-gray-600 hover:text-gray-800"
          tabindex="-1">
          @if (showPassword) {
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7a10.038 10.038 0 013.642-5.042M6.18 6.18l11.64 11.64M9.88 9.88a3 3 0 004.24 4.24" />
            </svg>
          } @else {
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.478 0-8.268-2.943-9.542-7z" />
            </svg>
          }
        </button>
      </div>
      <p class="text-xs text-gray-400 mt-1">
        Mínimo 8 caracteres, con mayúsculas, minúsculas, número y símbolo.
      </p>
    </div>
    <div class="mb-4">
      <label class="block text-sm tracking-wide mb-1 text-gray-200" for="confirmPassword">
        Confirmar contraseña
      </label>
      <div class="relative">
        <input
          id="confirmPassword"
          [type]="showConfirmPassword ? 'text' : 'password'"
          formControlName="confirmPassword"
          placeholder="Ingrese nuevamente su contraseña"
          class="w-full px-3 py-1 rounded-lg border border-gray-300 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-400" />
        <button
          type="button"
          (click)="toggleConfirmPasswordVisibility()"
          class="absolute top-1/2 right-3 transform -translate-y-1/2 text-gray-600 hover:text-gray-800"
          tabindex="-1">
          @if (showConfirmPassword) {
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7a10.038 10.038 0 013.642-5.042M6.18 6.18l11.64 11.64M9.88 9.88a3 3 0 004.24 4.24" />
            </svg>
          } @else {
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.478 0-8.268-2.943-9.542-7z" />
            </svg>
          }
        </button>
      </div>
      @if (
        registerForm.get('confirmPassword')?.touched && registerForm.hasError('passwordMismatch')
      ) {
        <div class="text-red-500 text-sm mt-1">
          <span>Las contraseñas no coinciden.</span>
        </div>
      }
    </div>
    <app-button
      [text]="'Registrar'"
      class="w-full"
      color="primary"
      [loading]="loading"
      type="submit"></app-button>
  </form>
  <div class="mt-4 text-center">
    <span class="text-sm text-gray-400">
      ¿Ya tienes cuenta?
      <a routerLink="/auth/login" class="text-blue-500 hover:underline cursor-pointer">
        Inicia sesión
      </a>
    </span>
  </div>
</div>
